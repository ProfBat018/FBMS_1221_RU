# Lesson 9: Повтор. Углубление в индексы.

# Indexes

## Clustered vs Non-Clustered Indexes.

### Clustered Indexes

- Clustered Indexes - это индексы, которые определяют физический порядок строк в таблице.
- Каждая таблица может иметь только один кластерный индекс (primary key).
- Primary key - это кластерный индекс, который определяет уникальность строки в таблице.
- Именно из-за этого у нас может быть всего один primary key в таблице.

Почему же кластерный индекс бывает только один в таблице ?

- Потому что кластерный индекс сортирует строки в таблице, а если у нас будет несколько кластерных индексов, то какой из них будет сортировать строки в таблице ?

<br>
Пример: 
- У нас есть таблица с Id, Name, Age.

При это Id - Primary key, а значит это кластерный индекс.
Если можно было бы создать еще один на Age, то как сортировать по порядку по двум параметрам.

# ЗАПОМНИТЕ !!!

Сортировка и Упорядочивание - это разные вещи.

* Сортировка - это когда мы сортируем по какому-то параметру.
* Упорядочивание - это когда мы сортируем по порядку добавления.

# Что такое SQL index Pages ? 

При создании кластелрного индекса, SQL Server создает структуру данных, которая называется SQL index Pages.

SQL index Pages - это структура данных, которая хранит в себе информацию о том, какие строки в таблице находятся на каких страницах.
<br>

По факту там храниться Dictionary<Pointer, row>

Сколько весит один SQL index Page -`8 KB`

![SQL indexes](https://s33046.pcdn.co/wp-content/uploads/2018/03/word-image-67.png)

[Как работает B-Tree ?](https://habr.com/ru/articles/114154/)

## Clustered VS Non-Clustered Indexes

![](https://1.bp.blogspot.com/-qgrBg8PTysU/WKWPZGdoPtI/AAAAAAAAGZI/yV_pHfv-cS0GSlgv-8xPJLNIGbHrvOVcgCLcB/s1600/Nonclustered%2BIndex%2Bon%2BClustered%2BIndex%2Bin%2BSQL%2BServer%2B2016.gif)




